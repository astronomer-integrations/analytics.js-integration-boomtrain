{
"/Users/terenceli/Boomtrain/segment/analytics.js-integration-boomtrain/lib/index.js":{"path":"/Users/terenceli/Boomtrain/segment/analytics.js-integration-boomtrain/lib/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":13,"7":13,"8":1,"9":2,"10":1,"11":7,"12":7,"13":1,"14":6,"15":6,"16":6,"17":6,"18":1,"19":3,"20":3,"21":1,"22":3,"23":2,"24":3,"25":1,"26":1,"27":1,"28":1,"29":2,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":2,"37":2,"38":0,"39":1},"b":{"1":[13,13],"2":[2,1],"3":[1,6],"4":[1,2],"5":[1,1],"6":[2,1],"7":[2,2],"8":[0,2],"9":[2,0]},"f":{"1":13,"2":2,"3":7,"4":3,"5":1,"6":2,"7":1},"fnMap":{"1":{"name":"(anonymous_1)","line":27,"loc":{"start":{"line":27,"column":33},"end":{"line":27,"column":44}}},"2":{"name":"(anonymous_2)","line":39,"loc":{"start":{"line":39,"column":29},"end":{"line":39,"column":40}}},"3":{"name":"(anonymous_3)","line":52,"loc":{"start":{"line":52,"column":31},"end":{"line":52,"column":50}}},"4":{"name":"(anonymous_4)","line":70,"loc":{"start":{"line":70,"column":27},"end":{"line":70,"column":42}}},"5":{"name":"(anonymous_5)","line":86,"loc":{"start":{"line":86,"column":28},"end":{"line":86,"column":44}}},"6":{"name":"convertDate","line":99,"loc":{"start":{"line":99,"column":0},"end":{"line":99,"column":27}}},"7":{"name":"getModel","line":111,"loc":{"start":{"line":111,"column":0},"end":{"line":111,"column":20}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":53}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":63}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"4":{"start":{"line":14,"column":0},"end":{"line":17,"column":110}},"5":{"start":{"line":27,"column":0},"end":{"line":30,"column":2}},"6":{"start":{"line":28,"column":2},"end":{"line":28,"column":32}},"7":{"start":{"line":29,"column":2},"end":{"line":29,"column":24}},"8":{"start":{"line":39,"column":0},"end":{"line":41,"column":2}},"9":{"start":{"line":40,"column":2},"end":{"line":40,"column":68}},"10":{"start":{"line":52,"column":0},"end":{"line":59,"column":2}},"11":{"start":{"line":53,"column":2},"end":{"line":53,"column":33}},"12":{"start":{"line":54,"column":2},"end":{"line":54,"column":53}},"13":{"start":{"line":54,"column":15},"end":{"line":54,"column":53}},"14":{"start":{"line":55,"column":2},"end":{"line":55,"column":60}},"15":{"start":{"line":56,"column":2},"end":{"line":56,"column":45}},"16":{"start":{"line":57,"column":2},"end":{"line":57,"column":34}},"17":{"start":{"line":58,"column":2},"end":{"line":58,"column":32}},"18":{"start":{"line":70,"column":0},"end":{"line":75,"column":2}},"19":{"start":{"line":71,"column":2},"end":{"line":71,"column":37}},"20":{"start":{"line":72,"column":2},"end":{"line":72,"column":68}},"21":{"start":{"line":72,"column":25},"end":{"line":72,"column":68}},"22":{"start":{"line":73,"column":2},"end":{"line":73,"column":54}},"23":{"start":{"line":73,"column":22},"end":{"line":73,"column":54}},"24":{"start":{"line":74,"column":2},"end":{"line":74,"column":41}},"25":{"start":{"line":86,"column":0},"end":{"line":89,"column":2}},"26":{"start":{"line":87,"column":2},"end":{"line":87,"column":38}},"27":{"start":{"line":88,"column":2},"end":{"line":88,"column":46}},"28":{"start":{"line":99,"column":0},"end":{"line":101,"column":1}},"29":{"start":{"line":100,"column":2},"end":{"line":100,"column":43}},"30":{"start":{"line":111,"column":0},"end":{"line":123,"column":1}},"31":{"start":{"line":112,"column":2},"end":{"line":112,"column":62}},"32":{"start":{"line":113,"column":2},"end":{"line":113,"column":16}},"33":{"start":{"line":114,"column":2},"end":{"line":114,"column":22}},"34":{"start":{"line":115,"column":2},"end":{"line":115,"column":23}},"35":{"start":{"line":116,"column":2},"end":{"line":121,"column":3}},"36":{"start":{"line":117,"column":4},"end":{"line":117,"column":77}},"37":{"start":{"line":118,"column":4},"end":{"line":120,"column":5}},"38":{"start":{"line":119,"column":6},"end":{"line":119,"column":80}},"39":{"start":{"line":122,"column":2},"end":{"line":122,"column":19}}},"branchMap":{"1":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":15},"end":{"line":28,"column":25}},{"start":{"line":28,"column":29},"end":{"line":28,"column":31}}]},"2":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":12},"end":{"line":40,"column":22}},{"start":{"line":40,"column":26},"end":{"line":40,"column":66}}]},"3":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":2},"end":{"line":54,"column":2}},{"start":{"line":54,"column":2},"end":{"line":54,"column":2}}]},"4":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":2},"end":{"line":72,"column":2}},{"start":{"line":72,"column":2},"end":{"line":72,"column":2}}]},"5":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":44},"end":{"line":72,"column":54}},{"start":{"line":72,"column":58},"end":{"line":72,"column":67}}]},"6":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":73,"column":2}},{"start":{"line":73,"column":2},"end":{"line":73,"column":2}}]},"7":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":19},"end":{"line":117,"column":43}},{"start":{"line":117,"column":47},"end":{"line":117,"column":76}}]},"8":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":4},"end":{"line":118,"column":4}},{"start":{"line":118,"column":4},"end":{"line":118,"column":4}}]},"9":{"line":118,"type":"binary-expr","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":16}},{"start":{"line":118,"column":20},"end":{"line":118,"column":43}}]}},"code":["(function () { 'use strict';","/**"," * Module dependencies."," */","","var convertDates = require('@segment/convert-dates');","var integration = require('@segment/analytics.js-integration');","var md5 = require('spark-md5').hash;","","/**"," * Expose `Boomtrain` integration."," */","","var Boomtrain = module.exports = integration('Boomtrain')","  .global('_bt')","  .option('apiKey', '')","  .tag('<script src=\"https://cdn.boomtrain.com/analyticstrain/{{ apiKey }}/analyticstrain.min.js\"></script>');","","/**"," * Initialize."," *"," *"," *"," * @api public"," */","","Boomtrain.prototype.initialize = function() {","  window._bt = window._bt || [];","  this.load(this.ready);","};","","/**"," * Loaded?"," *"," * @api private"," * @return {boolean}"," */","","Boomtrain.prototype.loaded = function() {","  return !!(window._bt && window._bt.push !== Array.prototype.push);","};","","/**"," * Identify."," *"," *"," *"," * @api public"," * @param {Identify} identify"," */","","Boomtrain.prototype.identify = function(identify) {","  var userId = identify.userId();","  if (!userId) return this.debug('user id required');","  var traits = identify.traits({ createdAt: 'created_at' });","  traits = convertDates(traits, convertDate);","  traits.email = identify.email();","  window._bt.person.set(traits);","};","","/**"," * Page."," *"," *"," *"," * @api public"," * @param {Page} page"," */","","Boomtrain.prototype.page = function(page) {","  var properties = page.properties();","  if (!properties.model) properties.model = getModel() || undefined;","  if (!properties.id) properties.id = md5(page.url());","  window._bt.track('viewed', properties);","};","","/**"," * Track."," *"," *"," *"," * @api public"," * @param {Track} track"," */","","Boomtrain.prototype.track = function(track) {","  var properties = track.properties();","  window._bt.track(track.event(), properties);","};","","/**"," * Convert a date to the format Boomtrain supports."," *"," * @api private"," * @param {Date} date"," * @return {number}"," */","","function convertDate(date) {","  return Math.floor(date.getTime() / 1000);","}","","/**"," * Get model of page, stored under meta-tag with property \"og:type\""," *"," * @api private"," * @param"," * @return {string}"," */","","function getModel() {","  var elements = window.document.getElementsByTagName('meta');","  var data = {};","  var pattern = 'og:';","  var key = 'property';","  for (var i = elements.length - 1; i >= 0; i--) {","    var property = elements[i].getAttribute && elements[i].getAttribute(key);","    if (property && property.match(pattern)) {","      data[property.replace(pattern, '')] = elements[i].getAttribute('content');","    }","  }","  return data.type;","}","","}());"],"l":{"6":1,"7":1,"8":1,"14":1,"27":1,"28":13,"29":13,"39":1,"40":2,"52":1,"53":7,"54":7,"55":6,"56":6,"57":6,"58":6,"70":1,"71":3,"72":3,"73":3,"74":3,"86":1,"87":1,"88":1,"99":1,"100":2,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":2,"118":2,"119":0,"122":1}}}
